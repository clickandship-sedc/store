"use strict";(self.webpackChunkdropship_react=self.webpackChunkdropship_react||[]).push([[107],{4245:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(2791),s=r(4511),i=r(9434),a=r(4061),l=r(184);const o=function(e){var t,r,o,u,c,d;let{dataObject:v,origin:h}=e;const m=(0,i.I0)(),f=(0,i.v9)((e=>e.mobile.isMobile)),g=(0,i.v9)((e=>e.filters.mobileFiltersOn)),[S]=(0,n.useState)(v.products),[p]=(0,n.useState)(S.reduce(((e,t)=>({min:Math.min(1,t.discountedPrice),max:Math.max(e.max,t.discountedPrice)})),{min:0,max:1})),[y]=(0,n.useState)((0,s.PR)(S)),[j]=(0,n.useState)((0,s.Ys)(S)),[x]=(0,n.useState)([...new Set(j)]),[b]=(0,n.useState)((0,s.p8)(S,x)),[F]=(0,n.useState)([...new Set(y)]),[k]=(0,n.useState)((0,s.nF)(S,F)),[C]=(0,n.useState)(S.reduce(((e,t)=>{var r,n;return e[null===(r=t.manufacturer)||void 0===r?void 0:r.name]=(e[null===(n=t.manufacturer)||void 0===n?void 0:n.name]||0)+1,e}),{})),[w,P]=(0,n.useState)(null),[M,O]=(0,n.useState)([]),[q,z]=(0,n.useState)(null),[L,R]=(0,n.useState)([]),[B,E]=(0,n.useState)([]),[V,N]=(0,n.useState)([]),[A,D]=(0,n.useState)({sort:"price",order:"asc"});(0,n.useEffect)((()=>{if(w&&Object.keys(w).length>0){const e=(0,s.ft)(S,w);O(e),f||z(w)}else O([])}),[f,w,S]),(0,n.useEffect)((()=>{if(M.length>0){const e=(0,s.Ys)(M),t=(0,s.PR)(M);R([...new Set(e)]),E([...new Set(t)]),N([...new Set(M.map((e=>{var t;return null===(t=e.manufacturer)||void 0===t?void 0:t.name})))])}else R(x),E(F),N([...new Set(S.map((e=>{var t;return null===(t=e.manufacturer)||void 0===t?void 0:t.name})))])}),[M,x,F,S]);const H=()=>{P(null)},I=()=>{const e=(0,s.ku)(w,"price",null);P(e)},T=(e,t)=>{const r=(0,s.ku)(w,t,e);P(r)};return(0,l.jsxs)("main",{className:"categoriesDetails",children:["search"!==h&&(0,l.jsx)(s.lw,{categoryid:(null===v||void 0===v||null===(t=v.category)||void 0===t?void 0:t.id)||(null===(r=v.products[0])||void 0===r||null===(o=r.category)||void 0===o?void 0:o.id),categorytitle:(null===v||void 0===v||null===(u=v.category)||void 0===u?void 0:u.name)||(null===(c=v.products[0])||void 0===c||null===(d=c.category)||void 0===d?void 0:d.name)}),(0,l.jsxs)("div",{className:"detailsListBody",children:[(!f||f&&g)&&(0,l.jsx)(s.m5,{origin:h,products:S,initialsPrices:p,uniqueColors:x,uniqueColorsCount:b,uniqueSizes:F,uniqueSizesCount:k,allManufacturers:C,currentFilters:w,filteredProducts:M,uniqueFilterColors:L,uniqueFilterSizes:B,filteredManufacturers:V,handlePriceChange:(e,t)=>{const r={from:e,to:t},n=(0,s.Tv)(w,"price",r);P(n)},handlePriceRemove:I,handleOtherFiltersRemove:T,handleOtherFiltersAdd:(e,t)=>{const r=(0,s.Tv)(w,t,e);P(r)},handleCloseButtonClick:()=>{g&&P(q||null),m((0,a.n)(!g))},clearFilters:H,applyFilters:()=>{m((0,a.n)(!g))}}),(0,l.jsx)(s.Vd,{dataObject:v,origin:h,initialProducts:S,currentFilters:w,filteredProducts:M,handlePriceRemove:I,handleOtherFiltersRemove:T,clearFilters:H,sortFilters:e=>{D(e)},currentSort:A})]}),f&&(0,l.jsx)("button",{className:"filtersButton",onClick:()=>{m((0,a.n)(!g))},children:(0,l.jsxs)("svg",{viewBox:"0 0 32 32",children:[(0,l.jsx)("path",{d:"M26 6H4v3.17l7.41 7.42l.59.58V26h4v-2h2v2a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-8l-7.41-7.41A2 2 0 0 1 2 9.17V6a2 2 0 0 1 2-2h22z",fill:"currentColor"}),(0,l.jsx)("path",{d:"M29.71 11.29l-3-3a1 1 0 0 0-1.42 0L16 17.59V22h4.41l9.3-9.29a1 1 0 0 0 0-1.42zM19.59 20H18v-1.59l5-5L24.59 15zM26 13.59L24.41 12L26 10.41L27.59 12z",fill:"currentColor"})]})})]})}},107:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});r(2791);var n=r(4245),s=r(4893),i=r(7689),a=r(6322),l=r(4316),o=r(6983),u=r(184);const c=function(){const{subId:e}=(0,i.UO)(),{data:t,error:r,isError:c,isPending:d,isSuccess:v,refetch:h}=(0,s.a)({queryKey:["subcategoryQuery",e],queryFn:()=>(0,o.g)(e)});return(0,u.jsx)(u.Fragment,{children:d?(0,u.jsx)(l.BigLoadingDiv,{link:"/",title:"loading sub-category...",message:"you can click here to retry if its taking too long",refetch:h}):v&&t?(0,u.jsx)(n.Z,{origin:"subcategory",dataObject:t}):c?(0,u.jsx)(a.default,{link:"/",title:"dont have that one",message:r.message}):(0,u.jsx)(u.Fragment,{})})}},6983:(e,t,r)=>{r.d(t,{g:()=>s});const n="/mock";async function s(e){const t=await fetch("".concat(n,"/subcategory.json"));if(!t.ok)throw new Error("Cannot find subcategory");return t.json()}}}]);
//# sourceMappingURL=107.e16231d4.chunk.js.map